# Hérite de l'image de base (dépendances déjà installées)
FROM analylit-base:latest

# Copier le code de l'application
COPY --chown=appuser:appuser . .

# Copier et rendre exécutable l'entrypoint
COPY --chown=appuser:appuser docker/entrypoint.sh ./entrypoint.sh
USER root
RUN chmod +x ./entrypoint.sh
USER appuser

EXPOSE 5000
ENTRYPOINT ["./entrypoint.sh"]