# Hérite de l'image de base (avec toutes les dépendances déjà installées)
FROM analylit-base:latest

# Copier le code de l'application
COPY . /home/appuser/app

# Ajuster les permissions
USER root
RUN chown -R appuser:appuser /home/appuser/app
USER appuser

# Commande par défaut pour le worker RQ
CMD ["python", "-m", "rq_worker", "-w", "rq.worker.SimpleWorker", "-c", "app.rq_config"]